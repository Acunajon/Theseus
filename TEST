"""This code is supposed to call the data and plot a BB curve on the same plot"""


import numpy as np
import matplotlib.pyplot as plt
import math
#import modules

#bug test
print 1


sample1 = open('C:\Users\jma48203\Desktop\Thesis\Initial data\DDisk_17jun13_allIRflux.txt' , 'r')
#calls document by directory
s1=sample1.readlines()
#reads line by line
s1 = np.array(map(lambda x: x.strip(), s1))
#removes whitespace
d = np.array(map(lambda x: x.split(), s1)).reshape((-1,3))
#splits each string into 3 strings
d = np.delete(d, [0,1,2]).reshape((-1,3))
#removes titles
d = d.astype(float)
#makes stings into a decimals
#print d

#bug test
print 2

x = []
y = []
for i in d:
    x.append(math.log10(i[0]))
    y.append(math.log10(i[1]))


#constants
pi = math.pi
e = math.e
#h = sp.hbar
h = 6.62607004*10**(-34)          #m**2*kg/s
#k = sp.Stefan_Boltzman
k = 1.38064852*10**(-23)          #m**2*kg/(s**2*K)
#c = sp.c
c = 299792458                     #m/s


Wv = 10.0560000
Flx = 0.152130000

#bug test
print 3

#data from first array.

#Determining initial temperature value
X = (4*h*pi*c**(2))/Flx*Wv**(5)
B = np.log(X)
T = (h*c)/(Wv*k*B+1)
T = T.astype(float)

#print T
#Main function
def plank(Wav, T):
    a = 2*h*c**2
    b = h*c/(Wav*k*T)
    Flux = (a/Wav**5)*(1/(e**(b)+1))
    return Flux

#bug test
print 4     
    
wavelengths = np.arange(1e-9, 3e-6, 1e-9) 
FluxT = plank(wavelengths, T)

X = math.log10(wavelengths)
Y = math.log10(FluxT)

plt.hold(True)
#plt.plot(wavelengths*1e9, FluxT, 'r-') 
plt.plot(X,Y, 'r-') 
plt.plot(x,y,'b.')
plt.show()

#bug test
print 5
